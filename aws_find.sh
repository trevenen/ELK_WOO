# part of larger set of scripts to create ansible ip's and hostnames for rapid ci/cd or one off info grabs.
SEARCH_TERM=prod-elk*;AWS_DEFAULT_PROFILE=pr;aws ec2 describe-instances --filters "Name=tag:Name,Values=*$SEARCH_TERM*" --query 'Reservations[].Instances[].{App_ID: Tags[?Key==`ApplicationID`].Value | [0],Name: Tags[?Key==`Name`].Value | [0],Environment: Tags[?Key==`Environment`].Value | [0],State: State.Name,PrivateIP: PrivateIpAddress}' --output table --profile $AWS_DEFAULT_PROFILE | grep pr | awk -F\|  '{print$5,"\011 #"$2$3$4$6$1}' | tr -s ' ' |  sed -e 's/^[ \t]*//' | sort -k5
